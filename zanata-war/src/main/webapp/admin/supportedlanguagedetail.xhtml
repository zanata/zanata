<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:zanata="http://java.sun.com/jsf/composite/zanata"
  template="../WEB-INF/template/template.xhtml">

  <ui:define
    name="page_title">#{msgs['jsf.CreateSupportedLanguage']}</ui:define>
  <ui:define name="center_content">
    <div class="g--centered">
      <div class="g__item w--3-4-m w--5-8-l w--1-3 l--push-bottom-1">
        <p class="txt--meta l--push-all-0">
          <s:link view="/admin/home.xhtml" propagation="none">
            #{msgs['jsf.Administration']}
          </s:link>
          <i class="i i--arrow-right"></i>
          <s:link view="/admin/languagemanager.xhtml" propagation="none">
            #{msgs['jsf.ManageLanguage']}
          </s:link>
        </p>

        <h1 class="l--push-all-0">#{msgs['jsf.language.details.title']}</h1>

        <h:form>
          <script type="text/javascript">
            function replaceUnderscores() {
              var langName = #{rich:element('localeName')}.value;
              langName = langName.replace('_', '-');
              #{rich:element('localeName')}.value = langName;
              validateLangName();
            }
          </script>

          <style type="text/css">
            .checkbox label {
              padding-right:0.40625em;
            }

            .checkbox input[type=checkbox] {
              width: 1em;
              height: 1em;
              vertical-align: middle;
              margin-bottom: 0.20625em;
            }
          </style>

          <a4j:jsFunction name="validateLangName"
            action="#{languageManagerAction.updateLanguage()}"
            render="output,localeNameMssgs"/>

          <div class="form__item l--push-top-1">
            <label
              for="#{rich:clientId('localeAutocomplete')}-autocomplete__input">
              #{msgs['jsf.Language']}
            </label>

            <zanata:autocomplete
              actionBean="#{languageManagerAction}"
              id="localeAutocomplete"
              minlength="1"
              fetchValue="#{result.localeId}"
              displayText="#{result.localeId}"
              render="output,localeNameMssgs"
              placeholder="#{msgs['jsf.language.search.placeholder']}">
              #{result.localeId}<span
              class="txt--understated l--push-left-quarter">#{result.retrieveDisplayName()}</span>
            </zanata:autocomplete>

            <s:div id="localeNameMssgs">
              <h:outputText
                value="#{languageManagerAction.languageNameValidationMessage}"
                rendered="#{not languageManagerAction.language.contains('_')}"
                styleClass="txt--danger"/>
              <h:panelGroup
                rendered="#{languageManagerAction.language.contains('_')}">
                #{msgs['jsf.language.validation.Underscores']}
                <a href="#"
                  onclick="replaceUnderscores();">#{msgs['jsf.language.validation.ReplaceUnderscores']}</a>
              </h:panelGroup>
              <h:outputText
                value="#{languageManagerAction.languageNameWarningMessage}"
                rendered="#{languageManagerAction.languageNameWarningMessage != null}"
                styleClass="txt--warning"/>
            </s:div>
          </div>

          <div class="form__item l--push-top-1 checkbox">
            <h:outputLabel for="enabled">#{msgs['jsf.EnabledByDefault']}</h:outputLabel>
            <h:selectBooleanCheckbox id="enabled" value="#{languageManagerAction.enabledByDefault}"/>
          </div>

          <s:div id="output" styleClass="txt--mini l--push-v-1">
            <div class="l--push-top-half">
              #{msgs['jsf.CountryCode']}<span class="txt--meta l--push-h-half">#{languageManagerAction.ULocale.country}</span>
            </div>
            <div class="l--push-top-half">
              #{msgs['jsf.Name']}<span class="txt--meta l--push-h-half">#{languageManagerAction.ULocale.displayName}</span>
            </div>
            <div class="l--push-top-half">
              #{msgs['jsf.LanguageCode']}<span class="txt--meta l--push-h-half">#{languageManagerAction.ULocale.language}</span>
            </div>
            <div class="l--push-top-half">
              #{msgs['jsf.Variant']}<span class="txt--meta l--push-h-half">#{languageManagerAction.ULocale.variant}</span>
            </div>
            <div class="l--push-top-half">
              #{msgs['jsf.NativeName']}<span class="txt--meta l--push-h-half">#{languageManagerAction.ULocale.getDisplayName(languageManagerAction.ULocale)}</span>
            </div>
          </s:div>

          <h:commandButton value="#{msgs['jsf.Save']}"
            action="#{languageManagerAction.save}" styleClass="button--primary"/>

          <s:button view="/admin/languagemanager.xhtml"
            value="#{msgs['jsf.Cancel']}" propagation="end"
            styleClass="button button--link l--push-left-half"/>

        </h:form>
      </div>
    </div>

  </ui:define>

</ui:composition>
